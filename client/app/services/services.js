var dataSet1 = [{"query":"donald trump","values":[{"date":"2016-12-03T01:00:00.000Z","value":81},{"date":"2016-12-03T02:00:00.000Z","value":83},{"date":"2016-12-03T03:00:00.000Z","value":84},{"date":"2016-12-03T04:00:00.000Z","value":75},{"date":"2016-12-03T05:00:00.000Z","value":64},{"date":"2016-12-03T06:00:00.000Z","value":49},{"date":"2016-12-03T07:00:00.000Z","value":37},{"date":"2016-12-03T08:00:00.000Z","value":32},{"date":"2016-12-03T09:00:00.000Z","value":29},{"date":"2016-12-03T10:00:00.000Z","value":28},{"date":"2016-12-03T11:00:00.000Z","value":29},{"date":"2016-12-03T12:00:00.000Z","value":34},{"date":"2016-12-03T13:00:00.000Z","value":37},{"date":"2016-12-03T14:00:00.000Z","value":39},{"date":"2016-12-03T15:00:00.000Z","value":39},{"date":"2016-12-03T16:00:00.000Z","value":43},{"date":"2016-12-03T17:00:00.000Z","value":46},{"date":"2016-12-03T18:00:00.000Z","value":50},{"date":"2016-12-03T19:00:00.000Z","value":51},{"date":"2016-12-03T20:00:00.000Z","value":54},{"date":"2016-12-03T21:00:00.000Z","value":56},{"date":"2016-12-03T22:00:00.000Z","value":63},{"date":"2016-12-03T23:00:00.000Z","value":65},{"date":"2016-12-04T00:00:00.000Z","value":69},{"date":"2016-12-04T01:00:00.000Z","value":78},{"date":"2016-12-04T02:00:00.000Z","value":73},{"date":"2016-12-04T03:00:00.000Z","value":72},{"date":"2016-12-04T04:00:00.000Z","value":79},{"date":"2016-12-04T05:00:00.000Z","value":64},{"date":"2016-12-04T06:00:00.000Z","value":50},{"date":"2016-12-04T07:00:00.000Z","value":40},{"date":"2016-12-04T08:00:00.000Z","value":33},{"date":"2016-12-04T09:00:00.000Z","value":30},{"date":"2016-12-04T10:00:00.000Z","value":28},{"date":"2016-12-04T11:00:00.000Z","value":30},{"date":"2016-12-04T12:00:00.000Z","value":35},{"date":"2016-12-04T13:00:00.000Z","value":43},{"date":"2016-12-04T14:00:00.000Z","value":50},{"date":"2016-12-04T15:00:00.000Z","value":55},{"date":"2016-12-04T16:00:00.000Z","value":58},{"date":"2016-12-04T17:00:00.000Z","value":59},{"date":"2016-12-04T18:00:00.000Z","value":59},{"date":"2016-12-04T19:00:00.000Z","value":60},{"date":"2016-12-04T20:00:00.000Z","value":62},{"date":"2016-12-04T21:00:00.000Z","value":65},{"date":"2016-12-04T22:00:00.000Z","value":75},{"date":"2016-12-04T23:00:00.000Z","value":83},{"date":"2016-12-05T00:00:00.000Z","value":89},{"date":"2016-12-05T01:00:00.000Z","value":100},{"date":"2016-12-05T02:00:00.000Z","value":90},{"date":"2016-12-05T03:00:00.000Z","value":86},{"date":"2016-12-05T04:00:00.000Z","value":82},{"date":"2016-12-05T05:00:00.000Z","value":61},{"date":"2016-12-05T06:00:00.000Z","value":47},{"date":"2016-12-05T07:00:00.000Z","value":38},{"date":"2016-12-05T08:00:00.000Z","value":31},{"date":"2016-12-05T09:00:00.000Z","value":28},{"date":"2016-12-05T10:00:00.000Z","value":27},{"date":"2016-12-05T11:00:00.000Z","value":31},{"date":"2016-12-05T12:00:00.000Z","value":36},{"date":"2016-12-05T13:00:00.000Z","value":39},{"date":"2016-12-05T14:00:00.000Z","value":43},{"date":"2016-12-05T15:00:00.000Z","value":46},{"date":"2016-12-05T16:00:00.000Z","value":49},{"date":"2016-12-05T17:00:00.000Z","value":52},{"date":"2016-12-05T18:00:00.000Z","value":55},{"date":"2016-12-05T19:00:00.000Z","value":56},{"date":"2016-12-05T20:00:00.000Z","value":56},{"date":"2016-12-05T21:00:00.000Z","value":60},{"date":"2016-12-05T22:00:00.000Z","value":66},{"date":"2016-12-05T23:00:00.000Z","value":72},{"date":"2016-12-06T00:00:00.000Z","value":76},{"date":"2016-12-06T01:00:00.000Z","value":78},{"date":"2016-12-06T02:00:00.000Z","value":78},{"date":"2016-12-06T03:00:00.000Z","value":75},{"date":"2016-12-06T04:00:00.000Z","value":69},{"date":"2016-12-06T05:00:00.000Z","value":53},{"date":"2016-12-06T06:00:00.000Z","value":40},{"date":"2016-12-06T07:00:00.000Z","value":33},{"date":"2016-12-06T08:00:00.000Z","value":26},{"date":"2016-12-06T09:00:00.000Z","value":24},{"date":"2016-12-06T10:00:00.000Z","value":25},{"date":"2016-12-06T11:00:00.000Z","value":28},{"date":"2016-12-06T12:00:00.000Z","value":33},{"date":"2016-12-06T13:00:00.000Z","value":37},{"date":"2016-12-06T14:00:00.000Z","value":42},{"date":"2016-12-06T15:00:00.000Z","value":47},{"date":"2016-12-06T16:00:00.000Z","value":50},{"date":"2016-12-06T17:00:00.000Z","value":53},{"date":"2016-12-06T18:00:00.000Z","value":55},{"date":"2016-12-06T19:00:00.000Z","value":57},{"date":"2016-12-06T20:00:00.000Z","value":58},{"date":"2016-12-06T21:00:00.000Z","value":61},{"date":"2016-12-06T22:00:00.000Z","value":67},{"date":"2016-12-06T23:00:00.000Z","value":77},{"date":"2016-12-07T00:00:00.000Z","value":80},{"date":"2016-12-07T01:00:00.000Z","value":93},{"date":"2016-12-07T02:00:00.000Z","value":79},{"date":"2016-12-07T03:00:00.000Z","value":77},{"date":"2016-12-07T04:00:00.000Z","value":70},{"date":"2016-12-07T05:00:00.000Z","value":54},{"date":"2016-12-07T06:00:00.000Z","value":40},{"date":"2016-12-07T07:00:00.000Z","value":32},{"date":"2016-12-07T08:00:00.000Z","value":28},{"date":"2016-12-07T09:00:00.000Z","value":25},{"date":"2016-12-07T10:00:00.000Z","value":24},{"date":"2016-12-07T11:00:00.000Z","value":28},{"date":"2016-12-07T12:00:00.000Z","value":39},{"date":"2016-12-07T13:00:00.000Z","value":47},{"date":"2016-12-07T14:00:00.000Z","value":49},{"date":"2016-12-07T15:00:00.000Z","value":52},{"date":"2016-12-07T16:00:00.000Z","value":54},{"date":"2016-12-07T17:00:00.000Z","value":56},{"date":"2016-12-07T18:00:00.000Z","value":57},{"date":"2016-12-07T19:00:00.000Z","value":59},{"date":"2016-12-07T20:00:00.000Z","value":59},{"date":"2016-12-07T21:00:00.000Z","value":65},{"date":"2016-12-07T22:00:00.000Z","value":72},{"date":"2016-12-07T23:00:00.000Z","value":80},{"date":"2016-12-08T00:00:00.000Z","value":70}]}];
var dataSet2 = [{"query":"john glenn","values":[{"date":"2016-12-01T23:00:00.000Z","value":0},{"date":"2016-12-02T00:00:00.000Z","value":0},{"date":"2016-12-02T01:00:00.000Z","value":0},{"date":"2016-12-02T02:00:00.000Z","value":0},{"date":"2016-12-02T03:00:00.000Z","value":0},{"date":"2016-12-02T04:00:00.000Z","value":0},{"date":"2016-12-02T05:00:00.000Z","value":0},{"date":"2016-12-02T06:00:00.000Z","value":0},{"date":"2016-12-02T07:00:00.000Z","value":0},{"date":"2016-12-02T08:00:00.000Z","value":0},{"date":"2016-12-02T09:00:00.000Z","value":0},{"date":"2016-12-02T10:00:00.000Z","value":0},{"date":"2016-12-02T11:00:00.000Z","value":0},{"date":"2016-12-02T12:00:00.000Z","value":0},{"date":"2016-12-02T13:00:00.000Z","value":0},{"date":"2016-12-02T14:00:00.000Z","value":0},{"date":"2016-12-02T15:00:00.000Z","value":0},{"date":"2016-12-02T16:00:00.000Z","value":0},{"date":"2016-12-02T17:00:00.000Z","value":0},{"date":"2016-12-02T18:00:00.000Z","value":0},{"date":"2016-12-02T19:00:00.000Z","value":0},{"date":"2016-12-02T20:00:00.000Z","value":0},{"date":"2016-12-02T21:00:00.000Z","value":0},{"date":"2016-12-02T22:00:00.000Z","value":0},{"date":"2016-12-02T23:00:00.000Z","value":0},{"date":"2016-12-03T00:00:00.000Z","value":0},{"date":"2016-12-03T01:00:00.000Z","value":0},{"date":"2016-12-03T02:00:00.000Z","value":0},{"date":"2016-12-03T03:00:00.000Z","value":0},{"date":"2016-12-03T04:00:00.000Z","value":0},{"date":"2016-12-03T05:00:00.000Z","value":0},{"date":"2016-12-03T06:00:00.000Z","value":0},{"date":"2016-12-03T07:00:00.000Z","value":0},{"date":"2016-12-03T08:00:00.000Z","value":0},{"date":"2016-12-03T09:00:00.000Z","value":0},{"date":"2016-12-03T10:00:00.000Z","value":0},{"date":"2016-12-03T11:00:00.000Z","value":0},{"date":"2016-12-03T12:00:00.000Z","value":0},{"date":"2016-12-03T13:00:00.000Z","value":0},{"date":"2016-12-03T14:00:00.000Z","value":0},{"date":"2016-12-03T15:00:00.000Z","value":0},{"date":"2016-12-03T16:00:00.000Z","value":0},{"date":"2016-12-03T17:00:00.000Z","value":0},{"date":"2016-12-03T18:00:00.000Z","value":0},{"date":"2016-12-03T19:00:00.000Z","value":0},{"date":"2016-12-03T20:00:00.000Z","value":0},{"date":"2016-12-03T21:00:00.000Z","value":0},{"date":"2016-12-03T22:00:00.000Z","value":0},{"date":"2016-12-03T23:00:00.000Z","value":0},{"date":"2016-12-04T00:00:00.000Z","value":0},{"date":"2016-12-04T01:00:00.000Z","value":0},{"date":"2016-12-04T02:00:00.000Z","value":0},{"date":"2016-12-04T03:00:00.000Z","value":0},{"date":"2016-12-04T04:00:00.000Z","value":0},{"date":"2016-12-04T05:00:00.000Z","value":0},{"date":"2016-12-04T06:00:00.000Z","value":0},{"date":"2016-12-04T07:00:00.000Z","value":0},{"date":"2016-12-04T08:00:00.000Z","value":0},{"date":"2016-12-04T09:00:00.000Z","value":0},{"date":"2016-12-04T10:00:00.000Z","value":0},{"date":"2016-12-04T11:00:00.000Z","value":0},{"date":"2016-12-04T12:00:00.000Z","value":0},{"date":"2016-12-04T13:00:00.000Z","value":0},{"date":"2016-12-04T14:00:00.000Z","value":0},{"date":"2016-12-04T15:00:00.000Z","value":0},{"date":"2016-12-04T16:00:00.000Z","value":0},{"date":"2016-12-04T17:00:00.000Z","value":0},{"date":"2016-12-04T18:00:00.000Z","value":0},{"date":"2016-12-04T19:00:00.000Z","value":0},{"date":"2016-12-04T20:00:00.000Z","value":0},{"date":"2016-12-04T21:00:00.000Z","value":0},{"date":"2016-12-04T22:00:00.000Z","value":0},{"date":"2016-12-04T23:00:00.000Z","value":0},{"date":"2016-12-05T00:00:00.000Z","value":0},{"date":"2016-12-05T01:00:00.000Z","value":0},{"date":"2016-12-05T02:00:00.000Z","value":0},{"date":"2016-12-05T03:00:00.000Z","value":0},{"date":"2016-12-05T04:00:00.000Z","value":0},{"date":"2016-12-05T05:00:00.000Z","value":0},{"date":"2016-12-05T06:00:00.000Z","value":0},{"date":"2016-12-05T07:00:00.000Z","value":0},{"date":"2016-12-05T08:00:00.000Z","value":0},{"date":"2016-12-05T09:00:00.000Z","value":0},{"date":"2016-12-05T10:00:00.000Z","value":0},{"date":"2016-12-05T11:00:00.000Z","value":0},{"date":"2016-12-05T12:00:00.000Z","value":0},{"date":"2016-12-05T13:00:00.000Z","value":0},{"date":"2016-12-05T14:00:00.000Z","value":0},{"date":"2016-12-05T15:00:00.000Z","value":0},{"date":"2016-12-05T16:00:00.000Z","value":0},{"date":"2016-12-05T17:00:00.000Z","value":0},{"date":"2016-12-05T18:00:00.000Z","value":0},{"date":"2016-12-05T19:00:00.000Z","value":0},{"date":"2016-12-05T20:00:00.000Z","value":0},{"date":"2016-12-05T21:00:00.000Z","value":0},{"date":"2016-12-05T22:00:00.000Z","value":0},{"date":"2016-12-05T23:00:00.000Z","value":0},{"date":"2016-12-06T00:00:00.000Z","value":0},{"date":"2016-12-06T01:00:00.000Z","value":0},{"date":"2016-12-06T02:00:00.000Z","value":0},{"date":"2016-12-06T03:00:00.000Z","value":0},{"date":"2016-12-06T04:00:00.000Z","value":0},{"date":"2016-12-06T05:00:00.000Z","value":0},{"date":"2016-12-06T06:00:00.000Z","value":0},{"date":"2016-12-06T07:00:00.000Z","value":0},{"date":"2016-12-06T08:00:00.000Z","value":0},{"date":"2016-12-06T09:00:00.000Z","value":0},{"date":"2016-12-06T10:00:00.000Z","value":0},{"date":"2016-12-06T11:00:00.000Z","value":0},{"date":"2016-12-06T12:00:00.000Z","value":0},{"date":"2016-12-06T13:00:00.000Z","value":0},{"date":"2016-12-06T14:00:00.000Z","value":0},{"date":"2016-12-06T15:00:00.000Z","value":0},{"date":"2016-12-06T16:00:00.000Z","value":0},{"date":"2016-12-06T17:00:00.000Z","value":0},{"date":"2016-12-06T18:00:00.000Z","value":0},{"date":"2016-12-06T19:00:00.000Z","value":0},{"date":"2016-12-06T20:00:00.000Z","value":0},{"date":"2016-12-06T21:00:00.000Z","value":0},{"date":"2016-12-06T22:00:00.000Z","value":0},{"date":"2016-12-06T23:00:00.000Z","value":0},{"date":"2016-12-07T00:00:00.000Z","value":0},{"date":"2016-12-07T01:00:00.000Z","value":0},{"date":"2016-12-07T02:00:00.000Z","value":0},{"date":"2016-12-07T03:00:00.000Z","value":0},{"date":"2016-12-07T04:00:00.000Z","value":0},{"date":"2016-12-07T05:00:00.000Z","value":0},{"date":"2016-12-07T06:00:00.000Z","value":0},{"date":"2016-12-07T07:00:00.000Z","value":0},{"date":"2016-12-07T08:00:00.000Z","value":0},{"date":"2016-12-07T09:00:00.000Z","value":0},{"date":"2016-12-07T10:00:00.000Z","value":0},{"date":"2016-12-07T11:00:00.000Z","value":0},{"date":"2016-12-07T12:00:00.000Z","value":0},{"date":"2016-12-07T13:00:00.000Z","value":0},{"date":"2016-12-07T14:00:00.000Z","value":0},{"date":"2016-12-07T15:00:00.000Z","value":0},{"date":"2016-12-07T16:00:00.000Z","value":0},{"date":"2016-12-07T17:00:00.000Z","value":0},{"date":"2016-12-07T18:00:00.000Z","value":0},{"date":"2016-12-07T19:00:00.000Z","value":0},{"date":"2016-12-07T20:00:00.000Z","value":0},{"date":"2016-12-07T21:00:00.000Z","value":1},{"date":"2016-12-07T22:00:00.000Z","value":1},{"date":"2016-12-07T23:00:00.000Z","value":4},{"date":"2016-12-08T00:00:00.000Z","value":2},{"date":"2016-12-08T01:00:00.000Z","value":2},{"date":"2016-12-08T02:00:00.000Z","value":2},{"date":"2016-12-08T03:00:00.000Z","value":2},{"date":"2016-12-08T04:00:00.000Z","value":1},{"date":"2016-12-08T05:00:00.000Z","value":1},{"date":"2016-12-08T06:00:00.000Z","value":0},{"date":"2016-12-08T07:00:00.000Z","value":0},{"date":"2016-12-08T08:00:00.000Z","value":0},{"date":"2016-12-08T09:00:00.000Z","value":0},{"date":"2016-12-08T10:00:00.000Z","value":0},{"date":"2016-12-08T11:00:00.000Z","value":1},{"date":"2016-12-08T12:00:00.000Z","value":1},{"date":"2016-12-08T13:00:00.000Z","value":1},{"date":"2016-12-08T14:00:00.000Z","value":1},{"date":"2016-12-08T15:00:00.000Z","value":1},{"date":"2016-12-08T16:00:00.000Z","value":1},{"date":"2016-12-08T17:00:00.000Z","value":1},{"date":"2016-12-08T18:00:00.000Z","value":1},{"date":"2016-12-08T19:00:00.000Z","value":1},{"date":"2016-12-08T20:00:00.000Z","value":100},{"date":"2016-12-08T21:00:00.000Z","value":99},{"date":"2016-12-08T22:00:00.000Z","value":70}]},{"query":"former astronaut","values":[{"date":"2016-12-01T23:00:00.000Z","value":0},{"date":"2016-12-02T00:00:00.000Z","value":0},{"date":"2016-12-02T01:00:00.000Z","value":0},{"date":"2016-12-02T02:00:00.000Z","value":0},{"date":"2016-12-02T03:00:00.000Z","value":0},{"date":"2016-12-02T04:00:00.000Z","value":0},{"date":"2016-12-02T05:00:00.000Z","value":0},{"date":"2016-12-02T06:00:00.000Z","value":0},{"date":"2016-12-02T07:00:00.000Z","value":0},{"date":"2016-12-02T08:00:00.000Z","value":0},{"date":"2016-12-02T09:00:00.000Z","value":0},{"date":"2016-12-02T10:00:00.000Z","value":0},{"date":"2016-12-02T11:00:00.000Z","value":0},{"date":"2016-12-02T12:00:00.000Z","value":0},{"date":"2016-12-02T13:00:00.000Z","value":0},{"date":"2016-12-02T14:00:00.000Z","value":0},{"date":"2016-12-02T15:00:00.000Z","value":0},{"date":"2016-12-02T16:00:00.000Z","value":0},{"date":"2016-12-02T17:00:00.000Z","value":0},{"date":"2016-12-02T18:00:00.000Z","value":0},{"date":"2016-12-02T19:00:00.000Z","value":0},{"date":"2016-12-02T20:00:00.000Z","value":0},{"date":"2016-12-02T21:00:00.000Z","value":0},{"date":"2016-12-02T22:00:00.000Z","value":0},{"date":"2016-12-02T23:00:00.000Z","value":0},{"date":"2016-12-03T00:00:00.000Z","value":0},{"date":"2016-12-03T01:00:00.000Z","value":0},{"date":"2016-12-03T02:00:00.000Z","value":0},{"date":"2016-12-03T03:00:00.000Z","value":0},{"date":"2016-12-03T04:00:00.000Z","value":0},{"date":"2016-12-03T05:00:00.000Z","value":0},{"date":"2016-12-03T06:00:00.000Z","value":0},{"date":"2016-12-03T07:00:00.000Z","value":0},{"date":"2016-12-03T08:00:00.000Z","value":0},{"date":"2016-12-03T09:00:00.000Z","value":0},{"date":"2016-12-03T10:00:00.000Z","value":0},{"date":"2016-12-03T11:00:00.000Z","value":0},{"date":"2016-12-03T12:00:00.000Z","value":0},{"date":"2016-12-03T13:00:00.000Z","value":0},{"date":"2016-12-03T14:00:00.000Z","value":0},{"date":"2016-12-03T15:00:00.000Z","value":0},{"date":"2016-12-03T16:00:00.000Z","value":0},{"date":"2016-12-03T17:00:00.000Z","value":0},{"date":"2016-12-03T18:00:00.000Z","value":0},{"date":"2016-12-03T19:00:00.000Z","value":0},{"date":"2016-12-03T20:00:00.000Z","value":0},{"date":"2016-12-03T21:00:00.000Z","value":0},{"date":"2016-12-03T22:00:00.000Z","value":0},{"date":"2016-12-03T23:00:00.000Z","value":0},{"date":"2016-12-04T00:00:00.000Z","value":0},{"date":"2016-12-04T01:00:00.000Z","value":0},{"date":"2016-12-04T02:00:00.000Z","value":0},{"date":"2016-12-04T03:00:00.000Z","value":0},{"date":"2016-12-04T04:00:00.000Z","value":0},{"date":"2016-12-04T05:00:00.000Z","value":0},{"date":"2016-12-04T06:00:00.000Z","value":0},{"date":"2016-12-04T07:00:00.000Z","value":0},{"date":"2016-12-04T08:00:00.000Z","value":0},{"date":"2016-12-04T09:00:00.000Z","value":0},{"date":"2016-12-04T10:00:00.000Z","value":0},{"date":"2016-12-04T11:00:00.000Z","value":0},{"date":"2016-12-04T12:00:00.000Z","value":0},{"date":"2016-12-04T13:00:00.000Z","value":0},{"date":"2016-12-04T14:00:00.000Z","value":0},{"date":"2016-12-04T15:00:00.000Z","value":0},{"date":"2016-12-04T16:00:00.000Z","value":0},{"date":"2016-12-04T17:00:00.000Z","value":0},{"date":"2016-12-04T18:00:00.000Z","value":0},{"date":"2016-12-04T19:00:00.000Z","value":0},{"date":"2016-12-04T20:00:00.000Z","value":0},{"date":"2016-12-04T21:00:00.000Z","value":0},{"date":"2016-12-04T22:00:00.000Z","value":0},{"date":"2016-12-04T23:00:00.000Z","value":0},{"date":"2016-12-05T00:00:00.000Z","value":0},{"date":"2016-12-05T01:00:00.000Z","value":0},{"date":"2016-12-05T02:00:00.000Z","value":0},{"date":"2016-12-05T03:00:00.000Z","value":0},{"date":"2016-12-05T04:00:00.000Z","value":0},{"date":"2016-12-05T05:00:00.000Z","value":0},{"date":"2016-12-05T06:00:00.000Z","value":0},{"date":"2016-12-05T07:00:00.000Z","value":0},{"date":"2016-12-05T08:00:00.000Z","value":0},{"date":"2016-12-05T09:00:00.000Z","value":0},{"date":"2016-12-05T10:00:00.000Z","value":0},{"date":"2016-12-05T11:00:00.000Z","value":0},{"date":"2016-12-05T12:00:00.000Z","value":0},{"date":"2016-12-05T13:00:00.000Z","value":0},{"date":"2016-12-05T14:00:00.000Z","value":0},{"date":"2016-12-05T15:00:00.000Z","value":0},{"date":"2016-12-05T16:00:00.000Z","value":0},{"date":"2016-12-05T17:00:00.000Z","value":0},{"date":"2016-12-05T18:00:00.000Z","value":0},{"date":"2016-12-05T19:00:00.000Z","value":0},{"date":"2016-12-05T20:00:00.000Z","value":0},{"date":"2016-12-05T21:00:00.000Z","value":0},{"date":"2016-12-05T22:00:00.000Z","value":0},{"date":"2016-12-05T23:00:00.000Z","value":0},{"date":"2016-12-06T00:00:00.000Z","value":0},{"date":"2016-12-06T01:00:00.000Z","value":0},{"date":"2016-12-06T02:00:00.000Z","value":0},{"date":"2016-12-06T03:00:00.000Z","value":0},{"date":"2016-12-06T04:00:00.000Z","value":0},{"date":"2016-12-06T05:00:00.000Z","value":0},{"date":"2016-12-06T06:00:00.000Z","value":0},{"date":"2016-12-06T07:00:00.000Z","value":0},{"date":"2016-12-06T08:00:00.000Z","value":0},{"date":"2016-12-06T09:00:00.000Z","value":0},{"date":"2016-12-06T10:00:00.000Z","value":0},{"date":"2016-12-06T11:00:00.000Z","value":0},{"date":"2016-12-06T12:00:00.000Z","value":0},{"date":"2016-12-06T13:00:00.000Z","value":0},{"date":"2016-12-06T14:00:00.000Z","value":0},{"date":"2016-12-06T15:00:00.000Z","value":0},{"date":"2016-12-06T16:00:00.000Z","value":0},{"date":"2016-12-06T17:00:00.000Z","value":0},{"date":"2016-12-06T18:00:00.000Z","value":0},{"date":"2016-12-06T19:00:00.000Z","value":0},{"date":"2016-12-06T20:00:00.000Z","value":0},{"date":"2016-12-06T21:00:00.000Z","value":0},{"date":"2016-12-06T22:00:00.000Z","value":0},{"date":"2016-12-06T23:00:00.000Z","value":0},{"date":"2016-12-07T00:00:00.000Z","value":0},{"date":"2016-12-07T01:00:00.000Z","value":0},{"date":"2016-12-07T02:00:00.000Z","value":0},{"date":"2016-12-07T03:00:00.000Z","value":0},{"date":"2016-12-07T04:00:00.000Z","value":0},{"date":"2016-12-07T05:00:00.000Z","value":0},{"date":"2016-12-07T06:00:00.000Z","value":0},{"date":"2016-12-07T07:00:00.000Z","value":0},{"date":"2016-12-07T08:00:00.000Z","value":0},{"date":"2016-12-07T09:00:00.000Z","value":0},{"date":"2016-12-07T10:00:00.000Z","value":0},{"date":"2016-12-07T11:00:00.000Z","value":0},{"date":"2016-12-07T12:00:00.000Z","value":0},{"date":"2016-12-07T13:00:00.000Z","value":0},{"date":"2016-12-07T14:00:00.000Z","value":0},{"date":"2016-12-07T15:00:00.000Z","value":0},{"date":"2016-12-07T16:00:00.000Z","value":0},{"date":"2016-12-07T17:00:00.000Z","value":0},{"date":"2016-12-07T18:00:00.000Z","value":0},{"date":"2016-12-07T19:00:00.000Z","value":0},{"date":"2016-12-07T20:00:00.000Z","value":0},{"date":"2016-12-07T21:00:00.000Z","value":0},{"date":"2016-12-07T22:00:00.000Z","value":0},{"date":"2016-12-07T23:00:00.000Z","value":0},{"date":"2016-12-08T00:00:00.000Z","value":0},{"date":"2016-12-08T01:00:00.000Z","value":0},{"date":"2016-12-08T02:00:00.000Z","value":0},{"date":"2016-12-08T03:00:00.000Z","value":0},{"date":"2016-12-08T04:00:00.000Z","value":0},{"date":"2016-12-08T05:00:00.000Z","value":0},{"date":"2016-12-08T06:00:00.000Z","value":0},{"date":"2016-12-08T07:00:00.000Z","value":0},{"date":"2016-12-08T08:00:00.000Z","value":0},{"date":"2016-12-08T09:00:00.000Z","value":0},{"date":"2016-12-08T10:00:00.000Z","value":0},{"date":"2016-12-08T11:00:00.000Z","value":0},{"date":"2016-12-08T12:00:00.000Z","value":0},{"date":"2016-12-08T13:00:00.000Z","value":0},{"date":"2016-12-08T14:00:00.000Z","value":0},{"date":"2016-12-08T15:00:00.000Z","value":0},{"date":"2016-12-08T16:00:00.000Z","value":0},{"date":"2016-12-08T17:00:00.000Z","value":0},{"date":"2016-12-08T18:00:00.000Z","value":0},{"date":"2016-12-08T19:00:00.000Z","value":0},{"date":"2016-12-08T20:00:00.000Z","value":0},{"date":"2016-12-08T21:00:00.000Z","value":0},{"date":"2016-12-08T22:00:00.000Z","value":0}]},{"query":"senator dies at 95","values":[{"date":"2016-12-01T23:00:00.000Z","value":0},{"date":"2016-12-02T00:00:00.000Z","value":0},{"date":"2016-12-02T01:00:00.000Z","value":0},{"date":"2016-12-02T02:00:00.000Z","value":0},{"date":"2016-12-02T03:00:00.000Z","value":0},{"date":"2016-12-02T04:00:00.000Z","value":0},{"date":"2016-12-02T05:00:00.000Z","value":0},{"date":"2016-12-02T06:00:00.000Z","value":0},{"date":"2016-12-02T07:00:00.000Z","value":0},{"date":"2016-12-02T08:00:00.000Z","value":0},{"date":"2016-12-02T09:00:00.000Z","value":0},{"date":"2016-12-02T10:00:00.000Z","value":0},{"date":"2016-12-02T11:00:00.000Z","value":0},{"date":"2016-12-02T12:00:00.000Z","value":0},{"date":"2016-12-02T13:00:00.000Z","value":0},{"date":"2016-12-02T14:00:00.000Z","value":0},{"date":"2016-12-02T15:00:00.000Z","value":0},{"date":"2016-12-02T16:00:00.000Z","value":0},{"date":"2016-12-02T17:00:00.000Z","value":0},{"date":"2016-12-02T18:00:00.000Z","value":0},{"date":"2016-12-02T19:00:00.000Z","value":0},{"date":"2016-12-02T20:00:00.000Z","value":0},{"date":"2016-12-02T21:00:00.000Z","value":0},{"date":"2016-12-02T22:00:00.000Z","value":0},{"date":"2016-12-02T23:00:00.000Z","value":0},{"date":"2016-12-03T00:00:00.000Z","value":0},{"date":"2016-12-03T01:00:00.000Z","value":0},{"date":"2016-12-03T02:00:00.000Z","value":0},{"date":"2016-12-03T03:00:00.000Z","value":0},{"date":"2016-12-03T04:00:00.000Z","value":0},{"date":"2016-12-03T05:00:00.000Z","value":0},{"date":"2016-12-03T06:00:00.000Z","value":0},{"date":"2016-12-03T07:00:00.000Z","value":0},{"date":"2016-12-03T08:00:00.000Z","value":0},{"date":"2016-12-03T09:00:00.000Z","value":0},{"date":"2016-12-03T10:00:00.000Z","value":0},{"date":"2016-12-03T11:00:00.000Z","value":0},{"date":"2016-12-03T12:00:00.000Z","value":0},{"date":"2016-12-03T13:00:00.000Z","value":0},{"date":"2016-12-03T14:00:00.000Z","value":0},{"date":"2016-12-03T15:00:00.000Z","value":0},{"date":"2016-12-03T16:00:00.000Z","value":0},{"date":"2016-12-03T17:00:00.000Z","value":0},{"date":"2016-12-03T18:00:00.000Z","value":0},{"date":"2016-12-03T19:00:00.000Z","value":0},{"date":"2016-12-03T20:00:00.000Z","value":0},{"date":"2016-12-03T21:00:00.000Z","value":0},{"date":"2016-12-03T22:00:00.000Z","value":0},{"date":"2016-12-03T23:00:00.000Z","value":0},{"date":"2016-12-04T00:00:00.000Z","value":0},{"date":"2016-12-04T01:00:00.000Z","value":0},{"date":"2016-12-04T02:00:00.000Z","value":0},{"date":"2016-12-04T03:00:00.000Z","value":0},{"date":"2016-12-04T04:00:00.000Z","value":0},{"date":"2016-12-04T05:00:00.000Z","value":0},{"date":"2016-12-04T06:00:00.000Z","value":0},{"date":"2016-12-04T07:00:00.000Z","value":0},{"date":"2016-12-04T08:00:00.000Z","value":0},{"date":"2016-12-04T09:00:00.000Z","value":0},{"date":"2016-12-04T10:00:00.000Z","value":0},{"date":"2016-12-04T11:00:00.000Z","value":0},{"date":"2016-12-04T12:00:00.000Z","value":0},{"date":"2016-12-04T13:00:00.000Z","value":0},{"date":"2016-12-04T14:00:00.000Z","value":0},{"date":"2016-12-04T15:00:00.000Z","value":0},{"date":"2016-12-04T16:00:00.000Z","value":0},{"date":"2016-12-04T17:00:00.000Z","value":0},{"date":"2016-12-04T18:00:00.000Z","value":0},{"date":"2016-12-04T19:00:00.000Z","value":0},{"date":"2016-12-04T20:00:00.000Z","value":0},{"date":"2016-12-04T21:00:00.000Z","value":0},{"date":"2016-12-04T22:00:00.000Z","value":0},{"date":"2016-12-04T23:00:00.000Z","value":0},{"date":"2016-12-05T00:00:00.000Z","value":0},{"date":"2016-12-05T01:00:00.000Z","value":0},{"date":"2016-12-05T02:00:00.000Z","value":0},{"date":"2016-12-05T03:00:00.000Z","value":0},{"date":"2016-12-05T04:00:00.000Z","value":0},{"date":"2016-12-05T05:00:00.000Z","value":0},{"date":"2016-12-05T06:00:00.000Z","value":0},{"date":"2016-12-05T07:00:00.000Z","value":0},{"date":"2016-12-05T08:00:00.000Z","value":0},{"date":"2016-12-05T09:00:00.000Z","value":0},{"date":"2016-12-05T10:00:00.000Z","value":0},{"date":"2016-12-05T11:00:00.000Z","value":0},{"date":"2016-12-05T12:00:00.000Z","value":0},{"date":"2016-12-05T13:00:00.000Z","value":0},{"date":"2016-12-05T14:00:00.000Z","value":0},{"date":"2016-12-05T15:00:00.000Z","value":0},{"date":"2016-12-05T16:00:00.000Z","value":0},{"date":"2016-12-05T17:00:00.000Z","value":0},{"date":"2016-12-05T18:00:00.000Z","value":0},{"date":"2016-12-05T19:00:00.000Z","value":0},{"date":"2016-12-05T20:00:00.000Z","value":0},{"date":"2016-12-05T21:00:00.000Z","value":0},{"date":"2016-12-05T22:00:00.000Z","value":0},{"date":"2016-12-05T23:00:00.000Z","value":0},{"date":"2016-12-06T00:00:00.000Z","value":0},{"date":"2016-12-06T01:00:00.000Z","value":0},{"date":"2016-12-06T02:00:00.000Z","value":0},{"date":"2016-12-06T03:00:00.000Z","value":0},{"date":"2016-12-06T04:00:00.000Z","value":0},{"date":"2016-12-06T05:00:00.000Z","value":0},{"date":"2016-12-06T06:00:00.000Z","value":0},{"date":"2016-12-06T07:00:00.000Z","value":0},{"date":"2016-12-06T08:00:00.000Z","value":0},{"date":"2016-12-06T09:00:00.000Z","value":0},{"date":"2016-12-06T10:00:00.000Z","value":0},{"date":"2016-12-06T11:00:00.000Z","value":0},{"date":"2016-12-06T12:00:00.000Z","value":0},{"date":"2016-12-06T13:00:00.000Z","value":0},{"date":"2016-12-06T14:00:00.000Z","value":0},{"date":"2016-12-06T15:00:00.000Z","value":0},{"date":"2016-12-06T16:00:00.000Z","value":0},{"date":"2016-12-06T17:00:00.000Z","value":0},{"date":"2016-12-06T18:00:00.000Z","value":0},{"date":"2016-12-06T19:00:00.000Z","value":0},{"date":"2016-12-06T20:00:00.000Z","value":0},{"date":"2016-12-06T21:00:00.000Z","value":0},{"date":"2016-12-06T22:00:00.000Z","value":0},{"date":"2016-12-06T23:00:00.000Z","value":0},{"date":"2016-12-07T00:00:00.000Z","value":0},{"date":"2016-12-07T01:00:00.000Z","value":0},{"date":"2016-12-07T02:00:00.000Z","value":0},{"date":"2016-12-07T03:00:00.000Z","value":0},{"date":"2016-12-07T04:00:00.000Z","value":0},{"date":"2016-12-07T05:00:00.000Z","value":0},{"date":"2016-12-07T06:00:00.000Z","value":0},{"date":"2016-12-07T07:00:00.000Z","value":0},{"date":"2016-12-07T08:00:00.000Z","value":0},{"date":"2016-12-07T09:00:00.000Z","value":0},{"date":"2016-12-07T10:00:00.000Z","value":0},{"date":"2016-12-07T11:00:00.000Z","value":0},{"date":"2016-12-07T12:00:00.000Z","value":0},{"date":"2016-12-07T13:00:00.000Z","value":0},{"date":"2016-12-07T14:00:00.000Z","value":0},{"date":"2016-12-07T15:00:00.000Z","value":0},{"date":"2016-12-07T16:00:00.000Z","value":0},{"date":"2016-12-07T17:00:00.000Z","value":0},{"date":"2016-12-07T18:00:00.000Z","value":0},{"date":"2016-12-07T19:00:00.000Z","value":0},{"date":"2016-12-07T20:00:00.000Z","value":0},{"date":"2016-12-07T21:00:00.000Z","value":0},{"date":"2016-12-07T22:00:00.000Z","value":0},{"date":"2016-12-07T23:00:00.000Z","value":0},{"date":"2016-12-08T00:00:00.000Z","value":0},{"date":"2016-12-08T01:00:00.000Z","value":0},{"date":"2016-12-08T02:00:00.000Z","value":0},{"date":"2016-12-08T03:00:00.000Z","value":0},{"date":"2016-12-08T04:00:00.000Z","value":0},{"date":"2016-12-08T05:00:00.000Z","value":0},{"date":"2016-12-08T06:00:00.000Z","value":0},{"date":"2016-12-08T07:00:00.000Z","value":0},{"date":"2016-12-08T08:00:00.000Z","value":0},{"date":"2016-12-08T09:00:00.000Z","value":0},{"date":"2016-12-08T10:00:00.000Z","value":0},{"date":"2016-12-08T11:00:00.000Z","value":0},{"date":"2016-12-08T12:00:00.000Z","value":0},{"date":"2016-12-08T13:00:00.000Z","value":0},{"date":"2016-12-08T14:00:00.000Z","value":0},{"date":"2016-12-08T15:00:00.000Z","value":0},{"date":"2016-12-08T16:00:00.000Z","value":0},{"date":"2016-12-08T17:00:00.000Z","value":0},{"date":"2016-12-08T18:00:00.000Z","value":0},{"date":"2016-12-08T19:00:00.000Z","value":0},{"date":"2016-12-08T20:00:00.000Z","value":0},{"date":"2016-12-08T21:00:00.000Z","value":0},{"date":"2016-12-08T22:00:00.000Z","value":0}]}];

angular.module('newsgate.services', [])
.factory('Response', function($http, $rootScope, $location, Data, State) {
  var urlHost = 'http://localhost:8000';
  var toggle = true;
  var sendLink = function(url) {
    State.hideSpinner = false;
    State.hideNav = true;
    $rootScope.$emit('updateSpinner');
    $rootScope.$emit('updateNav');
    let apiPath = '/api';
    let message = {
        url: url
    };

    $http.post(
      urlHost.concat(apiPath),
      message
    )
    .then((res) => {
      console.log('SERVER:', res);
	    Data.url = res.data.url,
	    Data.title = res.data.title,
	    Data.keywords = res.data.keywords,
	    Data.twitter = res.data.twitter,
      Data.google = res.data.google,
      Data.fake = res.data.fake,
      State.hideSpinner = true;
      State.hideNav = false;

      // work around for googleTrends to use hardcoded data
      if (true) {
        if (toggle) {
          Data.google = dataSet1;
          toggle = false;
        } else {
          Data.google = dataSet2;
          toggle = true;
        }
      }

      $rootScope.$emit('updateSpinner');
      $rootScope.$emit('updateNav');
      $rootScope.$emit('newTopThree');
      $rootScope.$emit('updateData');
      $location.path('/main');
    });

    console.log('CLIENT SEND MESSAGE:', message);
  };

  return {
    sendLink: sendLink
  };
})
.factory('Data', function() {

  // var dataSet1 = dataSet1[0];
  // var dataSet2 = dataSet2[0];

  var dataGet = function(data, status) {
    if (!data) data = dataSet1[0];
    // console.log('invoked data get with:', data);
    var columns = ['date', 'value'];
    // var y = [];
    var processedData = [];

    for (let i = 0; i < data.values.length; i++) {
      data.values[i].date = new Date(data.values[i].date);
      if (status === 'init') {
        data.values[i].value = 0;
      }
      processedData.push(data.values[i]);
    }

    processedData['columns'] = columns;
    return processedData;

  };

  // store responses here... easier to access
  return {
    process: dataGet,
    url: {},
    title: {},
    fake: {},
    keywords: {keywords:[]},
    twitter: {},
    google: [[], dataSet1[0]],
    test1: dataSet1[0],
    test2: dataSet2[0]
  };
})
.factory('State', function() {
  return {
    hideSpinner: true,
    hideNav: true
  }
});
